
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Marine carbonate system calculations in Python">
      
      
        <meta name="author" content="Matthew P. Humphreys">
      
      
      
        <link rel="prev" href="../advanced/">
      
      
        <link rel="next" href="../refs/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Switching from v1 to v2 - PyCO2SYS</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M17%2013h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300i,400,400i,700,700i%7CNoto+Sans+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Sans";--md-code-font:"Noto Sans Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#switching-from-v1-to-v2" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PyCO2SYS" class="md-header__button md-logo" aria-label="PyCO2SYS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PyCO2SYS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Switching from v1 to v2
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/mvdh7/PyCO2SYS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    mvdh7/PyCO2SYS
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PyCO2SYS" class="md-nav__button md-logo" aria-label="PyCO2SYS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    PyCO2SYS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mvdh7/PyCO2SYS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    mvdh7/PyCO2SYS
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview and installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quick/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick-start guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../detail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arguments and results
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adjust/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adjust conditions (temperature and pressure)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../uncertainty/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Uncertainty propagation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validity range checker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced tips and tricks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Switching from v1 to v2
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Switching from v1 to v2
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#solving-the-carbonate-system" class="md-nav__link">
    <span class="md-ellipsis">
      Solving the carbonate system
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solving the carbonate system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#one-set-of-settings-per-call" class="md-nav__link">
    <span class="md-ellipsis">
      One set of settings per call
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-the-system-is-solved" class="md-nav__link">
    <span class="md-ellipsis">
      When the system is solved
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving parameters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Retrieving parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#retrieving-multiple-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving multiple parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-solve-method" class="md-nav__link">
    <span class="md-ellipsis">
      The solve method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dot-notation" class="md-nav__link">
    <span class="md-ellipsis">
      Dot notation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-and-output-conditions" class="md-nav__link">
    <span class="md-ellipsis">
      Input and output conditions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uncertainty-propagation" class="md-nav__link">
    <span class="md-ellipsis">
      Uncertainty propagation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings" class="md-nav__link">
    <span class="md-ellipsis">
      Settings
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../refs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    References
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../versions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Version history
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#solving-the-carbonate-system" class="md-nav__link">
    <span class="md-ellipsis">
      Solving the carbonate system
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solving the carbonate system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#one-set-of-settings-per-call" class="md-nav__link">
    <span class="md-ellipsis">
      One set of settings per call
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-the-system-is-solved" class="md-nav__link">
    <span class="md-ellipsis">
      When the system is solved
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving parameters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Retrieving parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#retrieving-multiple-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving multiple parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-solve-method" class="md-nav__link">
    <span class="md-ellipsis">
      The solve method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dot-notation" class="md-nav__link">
    <span class="md-ellipsis">
      Dot notation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-and-output-conditions" class="md-nav__link">
    <span class="md-ellipsis">
      Input and output conditions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uncertainty-propagation" class="md-nav__link">
    <span class="md-ellipsis">
      Uncertainty propagation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings" class="md-nav__link">
    <span class="md-ellipsis">
      Settings
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<div class="admonition danger">
<p class="admonition-title">PyCO2SYS v2 beta</p>
<p>These are the docs for the beta release of PyCO2SYS v2!</p>
<p>If you're here to test it, then thank you! and please report any issues via <a href="https://github.com/mvdh7/PyCO2SYS/issues">the GitHub repo</a>.</p>
<p><strong>These instructions will not work for the current version 1.8</strong> that can be installed through <code>pip</code> and <code>conda</code> - please see <a href="https://pyco2sys.readthedocs.io/en/latest/">PyCO2SYS.readthedocs.io</a> for documentation for the latest stable release.</p>
</div>
<h1 id="switching-from-v1-to-v2">Switching from v1 to v2<a class="headerlink" href="#switching-from-v1-to-v2" title="Permanent link">&para;</a></h1>
<p>This explanation is designed as a detailed overview of differences for those who are already familiar with using PyCO2SYS with the <code>pyco2.sys</code> syntax from v1.  New or casual users may find the <a href="../detail/">general instructions for v2</a> more helpful.</p>
<h2 id="solving-the-carbonate-system">Solving the carbonate system<a class="headerlink" href="#solving-the-carbonate-system" title="Permanent link">&para;</a></h2>
<p>On the surface, v2 looks similar to v1.  For example:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">v2.0</label><label for="__tabbed_1_2">v1.8</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">PyCO2SYS</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pyco2</span>

<span class="c1"># Set up the CO2System</span>
<span class="n">co2s</span> <span class="o">=</span> <span class="n">pyco2</span><span class="o">.</span><span class="n">sys</span><span class="p">(</span>
    <span class="n">alkalinity</span><span class="o">=</span><span class="mi">2250</span><span class="p">,</span>
    <span class="n">pH</span><span class="o">=</span><span class="mf">8.1</span><span class="p">,</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mf">12.5</span><span class="p">,</span>
    <span class="n">salinity</span><span class="o">=</span><span class="mf">32.4</span><span class="p">,</span>
    <span class="n">opt_k_carbonic</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Solve for and retrieve a calculated parameter</span>
<span class="n">dic</span> <span class="o">=</span> <span class="n">co2s</span><span class="p">[</span><span class="s2">&quot;dic&quot;</span><span class="p">]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">PyCO2SYS</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pyco2</span>

<span class="c1"># Solve the carbonate system</span>
<span class="n">co2s</span> <span class="o">=</span> <span class="n">pyco2</span><span class="o">.</span><span class="n">sys</span><span class="p">(</span>
    <span class="n">par1</span><span class="o">=</span><span class="mi">2250</span><span class="p">,</span>
    <span class="n">par2</span><span class="o">=</span><span class="mf">8.1</span><span class="p">,</span>
    <span class="n">par1_type</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">par2_type</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mf">12.5</span><span class="p">,</span>
    <span class="n">salinity</span><span class="o">=</span><span class="mf">32.4</span><span class="p">,</span>
    <span class="n">opt_k_carbonic</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Retrieve a calculated parameter</span>
<span class="n">dic</span> <span class="o">=</span> <span class="n">co2s</span><span class="p">[</span><span class="s2">&quot;dic&quot;</span><span class="p">]</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="one-set-of-settings-per-call">One set of settings per call<a class="headerlink" href="#one-set-of-settings-per-call" title="Permanent link">&para;</a></h3>
<p>The most obvious change above is that the known marine carbonate system parameters <code>alkalinity</code> and <code>pH</code> are provided directly as kwargs, instead of using the old approach with <code>par1</code>, <code>par2</code>, <code>par1_type</code> and <code>par2_type</code>.</p>
<p>This does mean that it's no longer possible to have multiple different parameter types within a single call to <code>pyco2.sys</code>.  Similarly, all settings parameters (anything beginning with <code>opt_</code>) can no longer be provided as arrays – each call to <code>pyco2.sys</code> can have only one combination of settings.</p>
<p>However, as before, all other parameters (e.g., <code>alkalinity</code>, <code>pH</code>, <code>temperature</code> and <code>salinity</code>) can be scalars or NumPy arrays of any shape, as long as they can all be <a href="https://numpy.org/doc/stable/user/basics.broadcasting.html">broadcasted</a> together.</p>
<p>Also as before, it's possible to provide no carbonate system parameters, and just calculate equilibrium constants and total salt contents, or one carbonate system parameter, and do whatever calculations are possible with it alone.</p>
<h3 id="when-the-system-is-solved">When the system is solved<a class="headerlink" href="#when-the-system-is-solved" title="Permanent link">&para;</a></h3>
<p>In v1.8, the result <code>co2s</code> was a standard Python dict containing all possible parameters, which were computed at the moment that <code>pyco2.sys</code> was called.  However, in v2.0, <code>co2s</code> is a <code>CO2System</code> object, and it contains only the values of kwargs provided as arguments.  Other parameters are computed only when the user attempts to retrieve them (e.g., with <code>co2s["dic"]</code> above).</p>
<p>When a parameter is retrieved, the minimum set of intermediate parameters required to compute it are also calculated and stored in <code>co2s</code>.  These stored values will be used to compute any subsequently requested parameters – they will not be recomputed each time.</p>
<h3 id="retrieving-parameters">Retrieving parameters<a class="headerlink" href="#retrieving-parameters" title="Permanent link">&para;</a></h3>
<p>As mentioned above, parameters can be retrieved (and, if necessary, calculated) as if <code>co2s</code> were a standard Python dict.  However, there is also more flexibility:</p>
<h4 id="retrieving-multiple-parameters">Retrieving multiple parameters<a class="headerlink" href="#retrieving-multiple-parameters" title="Permanent link">&para;</a></h4>
<p>A list of parameters can be provided with the same syntax as above:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">v2.0</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Solve for / return DIC and fCO2</span>
<span class="n">params</span> <span class="o">=</span> <span class="n">co2s</span><span class="p">[[</span><span class="s2">&quot;dic&quot;</span><span class="p">,</span> <span class="s2">&quot;fCO2&quot;</span><span class="p">]]</span>

<span class="c1"># Access the results</span>
<span class="n">dic</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;dic&quot;</span><span class="p">]</span>
<span class="n">fCO2</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;fCO2&quot;</span><span class="p">]</span>
</code></pre></div>
</div>
</div>
</div>
<p>The result <code>params</code> is a standard dict containing the requested parameters.</p>
<h4 id="the-solve-method">The <code>solve</code> method<a class="headerlink" href="#the-solve-method" title="Permanent link">&para;</a></h4>
<p>Parameters can be solved for using <code>solve</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">v2.0</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Solve for a calculated parameter</span>
<span class="n">co2s</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="s2">&quot;dic&quot;</span><span class="p">,</span> <span class="n">store_steps</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p>This gives the added flexibility of the <code>store_steps</code> kwarg:</p>
<ul>
<li>If <code>0</code>, then only the requested parameter is stored.</li>
<li>If <code>1</code> (default), then the standard set of intermediate parameters is stored in the <code>co2s</code>.</li>
<li>If <code>2</code>, then all possible intermediate parameters are stored.</li>
</ul>
<h4 id="dot-notation">Dot notation<a class="headerlink" href="#dot-notation" title="Permanent link">&para;</a></h4>
<p>If a parameter has been calculated, either directly or as an intermediate for another parameter, and its value is stored in the <code>co2s</code>, it can also be accessed with dot notation:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">v2.0</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Access DIC, if it has been previously calculated</span>
<span class="n">dic</span> <span class="o">=</span> <span class="n">co2s</span><span class="o">.</span><span class="n">dic</span>
</code></pre></div>
</div>
</div>
</div>
<p>This will throw an error if the requested parameter is not already available.</p>
<h2 id="input-and-output-conditions">Input and output conditions<a class="headerlink" href="#input-and-output-conditions" title="Permanent link">&para;</a></h2>
<p>In v1, a second set of temperature and/or pressure conditions could be specified as 'output' conditions with the suffix <code>_out</code> for their arguments and results.  In v2, each <code>CO2System</code> can have only one set of temperature and pressure conditions.  To adjust to a different set of conditions, use the <code>adjust</code> method:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">v2.0</label><label for="__tabbed_5_2">v1.8</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Set up the CO2System</span>
<span class="n">co2s</span> <span class="o">=</span> <span class="n">pyco2</span><span class="o">.</span><span class="n">sys</span><span class="p">(</span>
    <span class="n">alkalinity</span><span class="o">=</span><span class="mi">2250</span><span class="p">,</span>
    <span class="n">pH</span><span class="o">=</span><span class="mf">8.1</span><span class="p">,</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mf">12.5</span><span class="p">,</span>
    <span class="n">salinity</span><span class="o">=</span><span class="mf">32.4</span><span class="p">,</span>
    <span class="n">opt_k_carbonic</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Convert to different conditions</span>
<span class="n">co2s_adj</span> <span class="o">=</span> <span class="n">co2s</span><span class="o">.</span><span class="n">adjust</span><span class="p">(</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
    <span class="n">pressure</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Get fCO2 at the adjusted conditions</span>
<span class="n">fCO2_adj</span> <span class="o">=</span> <span class="n">co2s_adj</span><span class="p">[</span><span class="s2">&quot;fCO2&quot;</span><span class="p">]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Solve the carbonate system</span>
<span class="n">co2s</span> <span class="o">=</span> <span class="n">pyco2</span><span class="o">.</span><span class="n">sys</span><span class="p">(</span>
    <span class="n">par1</span><span class="o">=</span><span class="mi">2250</span><span class="p">,</span>
    <span class="n">par2</span><span class="o">=</span><span class="mf">8.1</span><span class="p">,</span>
    <span class="n">par1_type</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">par2_type</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mf">12.5</span><span class="p">,</span>
    <span class="n">temperature_out</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
    <span class="n">pressure_out</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">salinity</span><span class="o">=</span><span class="mf">32.4</span><span class="p">,</span>
    <span class="n">opt_k_carbonic</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Get fCO2 at the adjusted conditions</span>
<span class="n">fCO2_adj</span> <span class="o">=</span> <span class="n">co2s</span><span class="p">[</span><span class="s2">&quot;fCO2_out&quot;</span><span class="p">]</span>
</code></pre></div>
</div>
</div>
</div>
<p>The result <code>co2s_adj</code> is a separate <code>CO2System</code> at the requested temperature and pressure.  If the original <code>co2s</code> had two known parameters, then both are used to make the adjustment (via DIC and alkalinity).  Temperature can also be adjusted with only one known parameter, if its one of pCO<sub>2</sub>, fCO<sub>2</sub>, [CO<sub>2</sub>(aq)] or <em>x</em>CO<sub>2</sub>.  The kwargs <code>method_fCO2</code>, <code>opt_which_fCO2_insitu</code> and <code>bh_upsilon</code> allow for finer control of the one-parameter adjustment (see the <a href="../detail/">v2 general instructions</a> for details).</p>
<h2 id="uncertainty-propagation">Uncertainty propagation<a class="headerlink" href="#uncertainty-propagation" title="Permanent link">&para;</a></h2>
<p>There are three main differences regarding uncertainty propagation:</p>
<ol>
<li>
<p>Uncertainty propagation is carried out by using the <code>set_uncertainty</code> and <code>propagate</code> methods in v2.0, instead of by including <code>uncertainty_into</code> and <code>uncertainty_from</code> kwargs in the main <code>pyco2.sys</code> call. </p>
</li>
<li>
<p>Uncertainty results are stored in nested dicts in <code>co2s.uncertainty</code> in v2.0, instead of as additional key-value pairs in <code>co2s</code> as in v1.8.</p>
</li>
<li>
<p>The derivatives used to propagate uncertainties are calculated with automatic differentiation in v2.0, but with forward finite differences in v1.8.</p>
</li>
</ol>
<p>The arguments provided to the <code>propagate</code> method in v2.0 are exactly the same <code>uncertainty_into</code> and <code>uncertainty_from</code> as were provided directly to <code>pyco2.sys</code> in v1.8.</p>
<p>An example:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">v2.0</label><label for="__tabbed_6_2">v1.8</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Set up the CO2System</span>
<span class="n">co2s</span> <span class="o">=</span> <span class="n">pyco2</span><span class="o">.</span><span class="n">sys</span><span class="p">(</span>
    <span class="n">alkalinity</span><span class="o">=</span><span class="mi">2250</span><span class="p">,</span>
    <span class="n">pH</span><span class="o">=</span><span class="mf">8.1</span><span class="p">,</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mf">12.5</span><span class="p">,</span>
    <span class="n">salinity</span><span class="o">=</span><span class="mf">32.4</span><span class="p">,</span>
    <span class="n">opt_k_carbonic</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Set and propagate uncertainties</span>
<span class="n">co2s</span><span class="o">.</span><span class="n">set_uncertainty</span><span class="p">(</span><span class="n">alkalinity</span><span class="o">=</span><span class="mf">2.1</span><span class="p">,</span> <span class="n">pH</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span>
<span class="n">co2s</span><span class="o">.</span><span class="n">propagate</span><span class="p">(</span><span class="s2">&quot;dic&quot;</span><span class="p">)</span>

<span class="c1"># Retrieve uncertainties and their components</span>
<span class="n">dic_uncertainty</span> <span class="o">=</span> <span class="n">co2s</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">[</span><span class="s2">&quot;dic&quot;</span><span class="p">]</span>
<span class="n">dic_uncertainty_from_pH</span> <span class="o">=</span> <span class="n">co2s</span><span class="o">.</span><span class="n">uncertainty</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="s2">&quot;dic&quot;</span><span class="p">][</span><span class="s2">&quot;pH&quot;</span><span class="p">]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Solve the carbonate system and propagate uncertainties</span>
<span class="n">co2s</span> <span class="o">=</span> <span class="n">pyco2</span><span class="o">.</span><span class="n">sys</span><span class="p">(</span>
    <span class="n">par1</span><span class="o">=</span><span class="mi">2250</span><span class="p">,</span>
    <span class="n">par2</span><span class="o">=</span><span class="mf">8.1</span><span class="p">,</span>
    <span class="n">par1_type</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">par2_type</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mf">12.5</span><span class="p">,</span>
    <span class="n">salinity</span><span class="o">=</span><span class="mf">32.4</span><span class="p">,</span>
    <span class="n">opt_k_carbonic</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">uncertainty_into</span><span class="o">=</span><span class="s2">&quot;dic&quot;</span><span class="p">,</span>
    <span class="n">uncertainty_from</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;par1&quot;</span><span class="p">:</span> <span class="mf">2.1</span><span class="p">,</span> <span class="s2">&quot;par2&quot;</span><span class="p">:</span> <span class="mf">0.02</span><span class="p">},</span>
<span class="p">)</span>

<span class="c1"># Retrieve uncertainties and their components</span>
<span class="n">dic_uncertainty</span> <span class="o">=</span> <span class="n">co2s</span><span class="p">[</span><span class="s2">&quot;u_dic&quot;</span><span class="p">]</span>
<span class="n">dic_uncertainty_from_pH</span> <span class="o">=</span> <span class="n">co2s</span><span class="p">[</span><span class="s2">&quot;u_dic__pH&quot;</span><span class="p">]</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="settings">Settings<a class="headerlink" href="#settings" title="Permanent link">&para;</a></h2>
<p>Before v2, changing <code>opt_k_carbonic</code> to a different set of carbonic acid dissociation constants could also cause other parameterisations to be switched behind the scenes (for e.g. the borate equilibrium constant and some pressure correction factors).  This behaviour was inherited from CO2SYS-MATLAB, but it has been eliminated in PyCO2SYS v2.  Instead, every parameterisation that has multiple options is controlled independently with its own setting.</p>
<p>This affects only <code>opt_k_carbonic</code> values <code>6</code>, <code>7</code>, and <code>8</code>, i.e., the GEOSECS and freshwater cases.  All other <code>opt_k_carbonic</code> options used the set of parameterisations that are now the defaults in v2.</p>
<!-- ## Summary of differences

| v1                                                                                                                                 | v2                                                                                            |
| ---------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------- |
| All possible parameters are always calculated.                                                                                     | Only the requested parameters and the required intermediates are calculated.                  |
| Settings (kwargs beginning `opt_`) can be multidimensional.                                                                        | Settings (`opts`) must all be scalars.                                                        |
| Known marine carbonate system parameters are provided as `par1` and `par2`, with their types given by `par1_type` and `par2_type`. | Known marine carbonate system core parameters are provided as `alkalinity`, `dic`, `pH`, etc. |
| Multiple different combinations of `par1_type` and `par2_type` can be provided.                                                    | Each `CO2System` instance can only contain one particular combination of core parameters.     | -->
<p>|</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../advanced/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Advanced tips and tricks">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Advanced tips and tricks
              </div>
            </div>
          </a>
        
        
          
          <a href="../refs/" class="md-footer__link md-footer__link--next" aria-label="Next: References">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                References
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2020-2025 Matthew P. Humphreys (GNU GPLv3)
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.footer", "content.code.copy", "navigation.expand", "content.tooltips"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>